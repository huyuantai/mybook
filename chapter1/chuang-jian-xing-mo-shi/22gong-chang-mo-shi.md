# 简单工厂、工厂模式、抽象工厂的区别

简单工厂
> 只有一个工厂来生产鼠标，包括戴尔鼠标和惠普鼠标

应用场景
> 工厂类创建的对象比较少比较固定：由于创建的对象较少，不会造成工厂方法中太过复杂，固定不需要修改工厂类，不会违背“开闭原则”

> 客户端只知道传入工厂类的参数，对于如何创建对象不关心：客户端既不需要关心创建细节，甚至连类名都不需要记住，只需要知道类型所对应的参数

> 如工具类java.text.DateFormat，它用于格式化一个本地日期或者时间。

----

工厂模式
> 将之前的一个工厂拆分成两个工厂，戴尔鼠标工厂专门生产戴尔鼠标；
惠普鼠标工厂专门生产惠普鼠标

>注意：这里有两个工厂，引进了一个抽象工厂
戴尔鼠标工厂和惠普鼠标工厂分别实现抽象工厂

应用场景
> 某系统日志记录器要求支持多种日志记录方式，如文件记录、数据库记录等，且用户可以根据要求动态选择日志记录方式， 现使用工厂方法模式设计该系统

----

抽象工厂
> 在工厂模式的基础上添加了另外一种类型的产品如键盘，这时戴尔鼠标工厂不能仅仅是生产戴尔鼠标而已了，它变成戴尔工厂，可以生产戴尔鼠标、戴尔键盘
同理惠普鼠标工厂变为惠普工厂，生产惠普鼠标、惠普键盘

> 注意：抽象工厂就是每个工厂可以生产两种以上不同类型的产品，如鼠标、键盘、USB线

应用场景
> 在很多软件系统中需要更换界面主题，要求界面中的按钮、文本框、背景色等一起发生改变时，可以使用抽象工厂模式进行设计

----

# 简单工厂类图
![](/assets/jiandangongchang.png)

# 工厂模式类图
![](/assets/gongchangmoshi.png)

# 抽象工厂类图
![](/assets/chouxiainggongchang.png)

# 产品等级与产品族
![](/assets/Pic44.gif)

-----

# 简单工厂详解
##### 定义
在简单工厂模式中，可以根据参数的不同返回不同类的实例

##### 作用
将对象的创建和对象本身业务处理分离可以降低系统的耦合度，使得两者修改起来都相对容易

##### 优点
客户端无须知道所创建的具体产品类的类名，只需要知道具体产品类所对应的参数即可，对于一些复杂的类名，通过简单工厂模式可以减少使用者的记忆量。
通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类，在一定程度上提高了系统的灵活性

##### 缺点
简单工厂模式最大的问题在于工厂类的职责相对过重，增加新的产品需要修改工厂类的判断逻辑，这一点与开闭原则是相违背的

##### 类图
![](/assets/jiandangongchang.png)

##### 时序图
![](/assets/jiandan.png)



# 工厂模式详解
##### 定义
在工厂方法模式中，工厂父类负责定义创建产品对象的公共接口，而工厂子类则负责生成具体的产品对象，这样做的目的是将产品类的实例化操作延迟到工厂子类中完成，即通过工厂子类来确定究竟应该实例化哪一个具体产品类

##### 作用
工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。在工厂方法模式中，核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这个核心类仅仅负责给出具体工厂必须实现的接口，而不负责哪一个产品类被实例化这种细节，这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品

##### 优点
基于工厂角色和产品角色的多态性设计是工厂方法模式的关键。它能够使工厂可以自主确定创建何种产品对象，而如何创建这个对象的细节则完全封装在具体工厂内部。工厂方法模式之所以又被称为多态工厂模式，是因为所有的具体工厂类都具有同一抽象父类。
使用工厂方法模式的另一个优点是在系统中加入新产品时，无须修改抽象工厂和抽象产品提供的接口，无须修改客户端，也无须修改其他的具体工厂和具体产品，而只要添加一个具体工厂和具体产品就可以了。这样，系统的可扩展性也就变得非常好，完全符合“开闭原则”

##### 缺点
在添加新产品时，需要编写新的具体产品类，而且还要提供与之对应的具体工厂类，系统中类的个数将成对增加，在一定程度上增加了系统的复杂度

##### 类图
![](/assets/gongchangmoshi.png)

##### 时序图
![](/assets/gongchangmoshi2.png)



# 抽象工厂模式详解

##### 产品等级与产品族定义
![](/assets/Pic44.gif)
产品等级：戴尔鼠标、惠普鼠标，同属于同一种类的产品
产品族：戴尔鼠标、戴尔键盘，不同种类的但同一品牌、系列的产品


##### 定义
提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类

##### 作用
工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。在工厂方法模式中，核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这个核心类仅仅负责给出具体工厂必须实现的接口，而不负责哪一个产品类被实例化这种细节，这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品

##### 优点
当一个产品族中的多个对象被设计成一起工作时，它能够保证客户端始终只使用同一个产品族中的对象。这对一些需要根据当前环境来决定其行为的软件系统来说，是一种非常实用的设计模式。
增加新的具体工厂和产品族很方便，无须修改已有系统，符合“开闭原则”。

##### 缺点
在添加新的产品对象时，难以扩展抽象工厂来生产新种类的产品，这是因为在抽象工厂角色中规定了所有可能被创建的产品集合，要支持新种类的产品就意味着要对该接口进行扩展，而这将涉及到对抽象工厂角色及其所有子类的修改，显然会带来较大的不便

##### 类图
![](/assets/chouxiainggongchang.png)

##### 时序图
![](/assets/chouxianggongchang2.png)
















































































