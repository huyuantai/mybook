# 创建型模式

### 1.单例模式

##### 定义
单例模式确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例，提供全局访问

##### 解决问题（为什么使用单例模式）
一则解决多线程并发访问的问题，避免对资源的多重占用、同时操作
二则节约CPU资源及内存资源，提交系统运行的效率，提高系统性能

##### 优点
* 提供了对唯一实例的受控访问；
* 由于在系统内存中只存在一个对象，因此可以节约系统资源，对于一些需要频繁创建和销毁的对象单例模式无疑可以提高系统的性能；
* 可以根据实际情况需要，在单例模式的基础上扩展做出双例模式，多例模式；

##### 缺点
* 单例类的职责过重，里面的代码可能会过于复杂，在一定程度上违背了“单一职责原则”。
* 如果实例化的对象长时间不被利用，会被系统认为是垃圾而被回收，这将导致对象状态的丢失

##### 适用场景
* 系统只需要一个实例对象，如系统要求提供一个唯一的序列号生成器，或者需要考虑资源消耗太大而只允许创建一个对象。
* 客户调用类的单个实例只允许使用一个公共访问点，除了该公共访问点，不能通过其他途径访问该实例。

#####  使用场景，项目中使用
程序的日志应用、配置对象的读取、数据库连接池、线程池、负载均衡器、工具类
缓存、日志对象、对话框、打印机、显卡的驱动程序对象

项目中有个打印面单的功能，设计就是单例模式，不能起两个打印程序


### 2.简单工厂
##### 定义
在简单工厂模式中，可以根据参数的不同返回不同类的实例

##### 作用
将对象的创建和对象本身业务处理分离可以降低系统的耦合度，使得两者修改起来都相对容易，从而避免了在客户端代码中显式指定，实现了解耦

##### 优点
客户端无须知道所创建的具体产品类的类名，只需要知道具体产品类所对应的参数即可，对于一些复杂的类名，通过简单工厂模式可以减少使用者的记忆量。
通过引入配置文件，可以在不修改任何客户端代码的情况下更换和增加新的具体产品类，在一定程度上提高了系统的灵活性

##### 缺点
简单工厂模式最大的问题在于工厂类的职责相对过重，增加新的产品需要修改工厂类的判断逻辑，这一点与开闭原则是相违背的


# 工厂模式详解
##### 定义
在工厂方法模式中，工厂父类负责定义创建产品对象的公共接口，而工厂子类则负责生成具体的产品对象，这样做的目的是将产品类的实例化操作延迟到工厂子类中完成，即通过工厂子类来确定究竟应该实例化哪一个具体产品类

##### 作用
工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。在工厂方法模式中，核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这个核心类仅仅负责给出具体工厂必须实现的接口，而不负责哪一个产品类被实例化这种细节，这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品

##### 优点
基于工厂角色和产品角色的多态性设计是工厂方法模式的关键。它能够使工厂可以自主确定创建何种产品对象，而如何创建这个对象的细节则完全封装在具体工厂内部。工厂方法模式之所以又被称为多态工厂模式，是因为所有的具体工厂类都具有同一抽象父类。
使用工厂方法模式的另一个优点是在系统中加入新产品时，无须修改抽象工厂和抽象产品提供的接口，无须修改客户端，也无须修改其他的具体工厂和具体产品，而只要添加一个具体工厂和具体产品就可以了。这样，系统的可扩展性也就变得非常好，完全符合“开闭原则”

##### 缺点
在添加新产品时，需要编写新的具体产品类，而且还要提供与之对应的具体工厂类，系统中类的个数将成对增加，在一定程度上增加了系统的复杂度


# 抽象工厂模式详解

##### 产品等级与产品族定义
![](/assets/Pic44.gif)
产品等级：戴尔鼠标、惠普鼠标，同属于同一种类的产品
产品族：戴尔鼠标、戴尔键盘，不同种类的但同一品牌、系列的产品


##### 定义
提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类

##### 作用
工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。在工厂方法模式中，核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这个核心类仅仅负责给出具体工厂必须实现的接口，而不负责哪一个产品类被实例化这种细节，这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品

##### 优点
当一个产品族中的多个对象被设计成一起工作时，它能够保证客户端始终只使用同一个产品族中的对象。这对一些需要根据当前环境来决定其行为的软件系统来说，是一种非常实用的设计模式。
增加新的具体工厂和产品族很方便，无须修改已有系统，符合“开闭原则”。

##### 缺点
在添加新的产品对象时，难以扩展抽象工厂来生产新种类的产品，这是因为在抽象工厂角色中规定了所有可能被创建的产品集合，要支持新种类的产品就意味着要对该接口进行扩展，而这将涉及到对抽象工厂角色及其所有子类的修改，显然会带来较大的不便








